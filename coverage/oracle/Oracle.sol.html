<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for oracle\Oracle.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">oracle/</a> Oracle.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/44</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/48</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/19</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/58</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;
&nbsp;
import "@openzeppelin/contracts-upgradeable/access/AccessControlUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol";
import "../libraries/GovernanceMath.sol";
import "../libraries/GovernanceErrors.sol";
&nbsp;
/**
 * @title Oracle
 * @dev Decentralized oracle for price feeds and data submission
 */
contract Oracle is 
    Initializable, 
    AccessControlUpgradeable, 
    UUPSUpgradeable,
    ReentrancyGuardUpgradeable,
    PausableUpgradeable 
{
    using GovernanceMath for uint256;
    
    // Role definitions
    bytes32 public constant ORACLE_ROLE = keccak256("ORACLE_ROLE");
    bytes32 public constant GOVERNOR_ROLE = keccak256("GOVERNOR_ROLE");
&nbsp;
    // Price data structure
    struct PriceData {
        uint256 price;
        uint256 timestamp;
        uint256 blockNumber;
        bool isValid;
    }
&nbsp;
    // Oracle configuration
    mapping(bytes32 =&gt; PriceData) public priceFeeds;
    mapping(address =&gt; bool) public authorizedOracles;
    address[] public oracleAddresses;
    
    uint256 public minOracleCount;
    uint256 public priceValidityPeriod;
    uint256 public priceSubmissionCooldown;
    
    mapping(bytes32 =&gt; mapping(address =&gt; uint256)) public lastSubmissionTime;
&nbsp;
    // Events
    event PriceUpdated(
        bytes32 indexed key,
        uint256 price,
        uint256 timestamp,
        address indexed oracle
    );
    event OracleAdded(address indexed oracle);
    event OracleRemoved(address indexed oracle);
    event PriceValidityPeriodSet(uint256 oldPeriod, uint256 newPeriod);
    event MinOracleCountSet(uint256 oldCount, uint256 newCount);
    event Upgraded(address indexed implementation);
&nbsp;
    // Errors
    error InvalidPrice();
    error PriceTooOld();
    error CooldownNotExpired();
    error OracleNotAuthorized();
    error InsufficientOracles();
    error InvalidOracleAddress();
    error PriceKeyNotFound();
&nbsp;
    /// @custom:oz-upgrades-unsafe-allow constructor
<span class="fstat-no" title="function not covered" >    constructor() {</span>
<span class="cstat-no" title="statement not covered" >        _disableInitializers()</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function initialize(</span>
        address admin,
        uint256 _minOracleCount,
        uint256 _priceValidityPeriod,
        uint256 _priceSubmissionCooldown
    ) public initializer {
<span class="cstat-no" title="statement not covered" >        __AccessControl_init()</span>;
<span class="cstat-no" title="statement not covered" >        __UUPSUpgradeable_init()</span>;
<span class="cstat-no" title="statement not covered" >        __ReentrancyGuard_init()</span>;
<span class="cstat-no" title="statement not covered" >        __Pausable_init()</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _grantRole(DEFAULT_ADMIN_ROLE, admin)</span>;
<span class="cstat-no" title="statement not covered" >        _grantRole(ORACLE_ROLE, admin)</span>;
<span class="cstat-no" title="statement not covered" >        _grantRole(GOVERNOR_ROLE, admin)</span>;
&nbsp;
        minOracleCount = _minOracleCount;
        priceValidityPeriod = _priceValidityPeriod;
        priceSubmissionCooldown = _priceSubmissionCooldown;
    }
&nbsp;
    // ============ ROLE-BASED FUNCTIONS ============
&nbsp;
    /**
     * @dev Submit price data - only ORACLE_ROLE
     */
<span class="fstat-no" title="function not covered" >    function submitPrice(bytes32 key, uint256 price) </span>
        external 
        onlyRole(ORACLE_ROLE) 
        whenNotPaused 
        nonReentrant 
    {
<span class="cstat-no" title="statement not covered" >        if (price == 0) revert InvalidPrice();</span>
<span class="cstat-no" title="statement not covered" >        if (!authorizedOracles[msg.sender]) revert OracleNotAuthorized();</span>
<span class="cstat-no" title="statement not covered" >        if (lastSubmissionTime[key][msg.sender] + priceSubmissionCooldown &gt; block.timestamp) {</span>
            revert CooldownNotExpired();
        }
&nbsp;
        // Update price data
        priceFeeds[key] = PriceData({
            price: price,
            timestamp: block.timestamp,
            blockNumber: block.number,
            isValid: true
        });
&nbsp;
        lastSubmissionTime[key][msg.sender] = block.timestamp;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit PriceUpdated(key, price, block.timestamp, msg.sender);</span>
    }
&nbsp;
    /**
     * @dev Add oracle address - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function addOracle(address oracle) </span>
        external 
        onlyRole(GOVERNOR_ROLE) 
    {
<span class="cstat-no" title="statement not covered" >        if (oracle == address(0)) revert InvalidOracleAddress();</span>
<span class="cstat-no" title="statement not covered" >        if (authorizedOracles[oracle]) revert InvalidOracleAddress();</span>
&nbsp;
        authorizedOracles[oracle] = true;
<span class="cstat-no" title="statement not covered" >        oracleAddresses.push(oracle)</span>;
<span class="cstat-no" title="statement not covered" >        _grantRole(ORACLE_ROLE, oracle)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit OracleAdded(oracle);</span>
    }
&nbsp;
    /**
     * @dev Remove oracle address - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function removeOracle(address oracle) </span>
        external 
        onlyRole(GOVERNOR_ROLE) 
    {
<span class="cstat-no" title="statement not covered" >        if (!authorizedOracles[oracle]) revert InvalidOracleAddress();</span>
&nbsp;
        authorizedOracles[oracle] = false;
<span class="cstat-no" title="statement not covered" >        _revokeRole(ORACLE_ROLE, oracle)</span>;
&nbsp;
        // Remove from oracleAddresses array
<span class="cstat-no" title="statement not covered" >        for (uint256 i = 0; i &lt; oracleAddresses.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            if (oracleAddresses[i] == oracle) {</span>
                oracleAddresses[i] = oracleAddresses[oracleAddresses.length - 1];
<span class="cstat-no" title="statement not covered" >                oracleAddresses.pop()</span>;
                break;
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit OracleRemoved(oracle);</span>
    }
&nbsp;
    /**
     * @dev Set price validity period - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function setPriceValidityPeriod(uint256 period) </span>
        external 
        onlyRole(GOVERNOR_ROLE) 
    {
<span class="cstat-no" title="statement not covered" >        if (period == 0) revert InvalidPrice();</span>
        
<span class="cstat-no" title="statement not covered" >        uint256 oldPeriod = priceValidityPeriod;</span>
        priceValidityPeriod = period;
<span class="cstat-no" title="statement not covered" >        emit PriceValidityPeriodSet(oldPeriod, period);</span>
    }
&nbsp;
    /**
     * @dev Set minimum oracle count - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function setMinOracleCount(uint256 count) </span>
        external 
        onlyRole(GOVERNOR_ROLE) 
    {
<span class="cstat-no" title="statement not covered" >        if (count == 0) revert InvalidPrice();</span>
<span class="cstat-no" title="statement not covered" >        if (count &gt; oracleAddresses.length) revert InsufficientOracles();</span>
        
<span class="cstat-no" title="statement not covered" >        uint256 oldCount = minOracleCount;</span>
        minOracleCount = count;
<span class="cstat-no" title="statement not covered" >        emit MinOracleCountSet(oldCount, count);</span>
    }
&nbsp;
    /**
     * @dev Set price submission cooldown - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function setPriceSubmissionCooldown(uint256 cooldown) </span>
        external 
        onlyRole(GOVERNOR_ROLE) 
    {
        priceSubmissionCooldown = cooldown;
    }
&nbsp;
    /**
     * @dev Pause oracle - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function pause() external onlyRole(GOVERNOR_ROLE) {</span>
<span class="cstat-no" title="statement not covered" >        _pause()</span>;
    }
&nbsp;
    /**
     * @dev Unpause oracle - only GOVERNOR_ROLE
     */
<span class="fstat-no" title="function not covered" >    function unpause() external onlyRole(GOVERNOR_ROLE) {</span>
<span class="cstat-no" title="statement not covered" >        _unpause()</span>;
    }
&nbsp;
    // ============ INTERNAL FUNCTIONS ============
&nbsp;
    /**
     * @dev Required by UUPSUpgradeable
     */
<span class="fstat-no" title="function not covered" >    function _authorizeUpgrade(address newImplementation) </span>
        internal 
        override 
        onlyRole(DEFAULT_ADMIN_ROLE) 
    {}
&nbsp;
    // ============ VIEW FUNCTIONS ============
&nbsp;
    /**
     * @dev Get latest price for a key
     */
<span class="fstat-no" title="function not covered" >    function getLatestPrice(bytes32 key) </span>
        external 
        view 
        returns (uint256 price, uint256 timestamp, bool isValid) 
    {
<span class="cstat-no" title="statement not covered" >        PriceData memory data = priceFeeds[key];</span>
        
<span class="cstat-no" title="statement not covered" >        if (!data.isValid) revert PriceKeyNotFound();</span>
<span class="cstat-no" title="statement not covered" >        if (block.timestamp - data.timestamp &gt; priceValidityPeriod) {</span>
            revert PriceTooOld();
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return (data.price, data.timestamp, data.isValid);</span>
    }
&nbsp;
    /**
     * @dev Get price data for a key
     */
<span class="fstat-no" title="function not covered" >    function getPriceData(bytes32 key) </span>
        external 
        view 
        returns (PriceData memory) 
    {
<span class="cstat-no" title="statement not covered" >        return priceFeeds[key];</span>
    }
&nbsp;
    /**
     * @dev Check if price is valid
     */
<span class="fstat-no" title="function not covered" >    function isPriceValid(bytes32 key) </span>
        external 
        view 
        returns (bool) 
    {
<span class="cstat-no" title="statement not covered" >        PriceData memory data = priceFeeds[key];</span>
<span class="cstat-no" title="statement not covered" >        return data.isValid &amp;&amp; (block.timestamp - data.timestamp &lt;= priceValidityPeriod);</span>
    }
&nbsp;
    /**
     * @dev Get all authorized oracles
     */
<span class="fstat-no" title="function not covered" >    function getAuthorizedOracles() </span>
        external 
        view 
        returns (address[] memory) 
    {
<span class="cstat-no" title="statement not covered" >        return oracleAddresses;</span>
    }
&nbsp;
    /**
     * @dev Get oracle count
     */
<span class="fstat-no" title="function not covered" >    function getOracleCount() external view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return oracleAddresses.length;</span>
    }
&nbsp;
    /**
     * @dev Get oracle configuration
     */
<span class="fstat-no" title="function not covered" >    function getOracleConfig() </span>
        external 
        view 
        returns (
            uint256 _minOracleCount,
            uint256 _priceValidityPeriod,
            uint256 _priceSubmissionCooldown
        ) 
    {
<span class="cstat-no" title="statement not covered" >        return (minOracleCount, priceValidityPeriod, priceSubmissionCooldown);</span>
    }
&nbsp;
    /**
     * @dev Check if address is authorized oracle
     */
<span class="fstat-no" title="function not covered" >    function isAuthorizedOracle(address oracle) external view returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        return authorizedOracles[oracle];</span>
    }
&nbsp;
    /**
     * @dev Get last submission time for oracle and key
     */
<span class="fstat-no" title="function not covered" >    function getLastSubmissionTime(bytes32 key, address oracle) </span>
        external 
        view 
        returns (uint256) 
    {
<span class="cstat-no" title="statement not covered" >        return lastSubmissionTime[key][oracle];</span>
    }
} </pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jul 01 2025 17:55:23 GMT+0200 (közép-európai nyári idő)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
